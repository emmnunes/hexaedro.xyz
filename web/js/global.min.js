function hashChange(){var e=window.location.hash.substring(1);var t=e.split("?");if(t[0]=="index.php"||t[0]==""){$("title").load(e+" title","",function(e){document.title=$(this).text()});$(".container").load(e+" #container-wrapper",function(){function i(e){t.newPosition=parseInt(t.currentPosition+t.scrollDelta*2);TweenLite.to(t.id,0,{left:t.currentPosition});t.currentPosition=t.newPosition;if(t.currentPosition>=t.startPosition+t.bgWidth){t.currentPosition=t.startPosition}if(t.currentPosition<=t.startPosition-t.bgWidth){t.currentPosition=t.startPosition}n.newPosition=parseInt(n.currentPosition+t.scrollDelta);TweenLite.to(n.id,0,{left:n.currentPosition/2});n.currentPosition=n.newPosition;if(n.currentPosition>=n.startPosition+n.bgWidth){n.currentPosition=n.startPosition}if(n.currentPosition<=n.startPosition-n.bgWidth){n.currentPosition=n.startPosition}r.newPosition=parseInt(r.currentPosition+t.scrollDelta);TweenLite.to(r.id,0,{left:r.currentPosition});r.currentPosition=r.newPosition;if(r.currentPosition>=r.startPosition+r.bgWidth){r.currentPosition=r.startPosition}if(r.currentPosition<=r.startPosition-n.bgWidth){r.currentPosition=r.startPosition}}index=true;$(".signature").hide();$(".homelang").hide();var e=-$(".content").height();TweenLite.to(".background",0,{y:e});TweenLite.to(".animals",0,{y:e});TweenLite.to(".menu",0,{y:e,onComplete:function(){$(".container").show();$(".loading").fadeIn()}});$(".page").fadeOut(function(){$(".preload").imgpreload(function(){$(".loading").fadeOut(function(){TweenLite.to(".background",1,{y:0});TweenLite.to(".animals",.8,{y:0});TweenLite.to(".menu",1,{y:0,onComplete:function(){if($(".content").height()>600)$(".signature").fadeIn("slow");$(".homelang").fadeIn("slow")}})})})});$(window).bind("resize",function(){if(index==true){var e=-($(".content").width()/2)+$(window).width()/2;t.currentPosition=e;n.currentPosition=e;r.currentPosition=e}});if(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/AppleWebKit/))document.getElementById("content").className="content custom_cursor";var t={id:$("#content"),dragging:false,prevMouseX:"",scrollOffset:"",touch_x:"",startPosition:-($(".content").width()/2)+$(window).width()/2,currentPosition:"0",newPosition:"",scrollDelta:"",bgWidth:3500};var n={id:$("#background"),startPosition:-($(".background").width()/2)+$(window).width()/2,currentPosition:"0",newPosition:"",bgWidth:3500};var r={id:$("#animals"),startPosition:-($(".animals").width()/2)+$(window).width()/2,currentPosition:"0",newPosition:"",bgWidth:3500};t.currentPosition=t.startPosition;n.currentPosition=n.startPosition;r.currentPosition=r.startPosition;setInterval(function(e){if(t.dragging==true){return false}t.scrollDelta=t.scrollDelta*.8;if(Math.abs(t.scrollDelta)<=1)t.scrollDelta=0;i(e)},20);$("#content").bind("vmousedown",function(e){if(t.dragging){return false}t.dragging=true;t.prevMouseX=e.clientX;$(this).addClass("grabbing")}).bind("vmouseup",function(e){t.dragging=false;t.scrollDelta=t.scrollDelta*.6;$(this).removeClass("grabbing")}).bind("vmousemove",function(e){if(!t.dragging){return false}$(".signature").fadeOut();t.scrollDelta=parseInt(e.clientX-t.prevMouseX);t.prevMouseX=e.clientX;i(e)}).bind("mousewheel",function(e,n){$(".signature").fadeOut();var r=Math.ceil(Math.sqrt(Math.abs(n)));r=n<0?-r:r;t.scrollDelta=t.scrollDelta+r*3;return false});$("body").bind("vmouseout",function(e){t.dragging=false});$(".item a").on("click",function(e){if(index)index=false;else index=true;var t=$(this).attr("href");window.location.hash=t;if("onhashchange"in window){return false}});$(".homelang a").on("click",function(e){var t=$(this).attr("href");window.location.hash=t;if("onhashchange"in window){return false}})});$(".page").html("")}else{$(".signature, .homelang").fadeOut();index=false;$(".page").hide();var n=-$(".content").height();TweenLite.to(".background",1,{y:n});TweenLite.to(".animals",.8,{y:n});TweenLite.to(".menu",1,{y:n,onComplete:function(){$(".loading").fadeIn();$("title").load(e+" title","",function(e){document.title=$(this).text()});$(".page").load(e+" .page-wrapper",function(){$(".preload").imgpreload(function(){$(".goback").load(e+" .cat-icon",function(){$(".goback a").on("click",function(e){var t=$(this).attr("href");$(".goback").removeClass("active");window.location.hash=t;if("onhashchange"in window){return false}});$(".footmenu a, .footlang a").on("click",function(e){var t=$(this).attr("href");window.location.hash=t;if("onhashchange"in window){return false}});$(".loading").fadeOut(function(){$(".page").fadeIn(function(){$(".goback").addClass("active")});$(".flexslider").flexslider({directionNav:false,keyboard:true,touch:true})})})});$(".concepts div").bind("click",function(e){$(this).toggleClass("selected").find("ul").show();$(this).siblings().removeClass("selected").find("ul").hide()});$("#research").bind("click",function(e){$(".proccess-full").hide();$("#research-full").show()});$("#conceptart").bind("click",function(e){$(".proccess-full").hide();$("#conceptart-full").show()});$("#editing").bind("click",function(e){$(".proccess-full").hide();$("#editing-full").show()});$("#assembly").bind("click",function(e){$(".proccess-full").hide();$("#assembly-full").show()});$("#isometric").bind("click",function(e){$(".viewselector .selected").removeClass("selected");$(this).addClass("selected");$(".largeview").css({"background-position":"0 0"},200,"linear")});$(".video").fitVids();$("#top").bind("click",function(e){$(".viewselector .selected").removeClass("selected");$(this).addClass("selected");$(".largeview").css({"background-position":"0 50%"},200,"linear")});$("#side").bind("click",function(e){$(".viewselector .selected").removeClass("selected");$(this).addClass("selected");$(".largeview").css({"background-position":"0 100%"},200,"linear")})});$(".container").html("")}})}}function disableSelection(e){if(typeof e.onselectstart!="undefined")e.onselectstart=function(){return false};else if(typeof e.style.MozUserSelect!="undefined")e.style.MozUserSelect="none";else e.onmousedown=function(){return false};e.style.cursor="default"}var index;jQuery(function(e){var t=-e(".content").height();TweenLite.to(".background",0,{y:t});TweenLite.to(".animals",0,{y:t});TweenLite.to(".menu",0,{y:t});e(window).bind("hashchange",function(){hashChange()});var n=window.location.hash.substring(1);if(n==""){var r=window.location.pathname;var n=r.substring(r.lastIndexOf("/")+1);if(n=="")n="index.php"}window.location.hash=n;e(window).trigger("hashchange")});$.fn.extend({scrollbarPaper:function(){this.each(function(e){var t=$(this);var n=t.data("paper");if(n==null){var r=function(){var e=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div></div>');$("body").append(e);var t=$("div",e).innerWidth();e.css("overflow-y","scroll");var n=$("div",e).innerWidth();e.remove();return Math.max(t-n,17)}.call();t.after('<div class="scrollbarpaper-container" style="width:'+r+'px"><div class="scrollbarpaper-track"><div class="scrollbarpaper-drag"><div class="scrollbarpaper-drag-top"></div><div class="scrollbarpaper-drag-bottom"></div></div></div></div>');n=t.next();t.append('<div style="clear:both;"></div>');var i=$("> :first",t);i.css("overflow","hidden");t.data("barWidth",r);t.data("paper",n);t.data("track",$(".scrollbarpaper-track",n));t.data("drag",$(".scrollbarpaper-drag",n));t.data("dragTop",$(".scrollbarpaper-drag-top",n));t.data("dragBottom",$(".scrollbarpaper-drag-bottom",n));t.data("content",i);t.data("clearer",$("> :last",t))}var r=t.data("barWidth");var s=t.data("track");var o=t.data("drag");var u=t.data("dragTop");var a=t.data("dragBottom");var i=t.data("content");var f=t.data("clearer");var l=f.position().top-i.position().top;t.data("height",t.height());t.data("contentHeight",l);t.data("offset",t.offset());var c=t.height()/l;if(c<1){n.show();n.removeClass("hidden-scroll");i.addClass("scrollbarpaper-visible");i.width(t.width()-i.innerWidth()+i.width()-r);n.height(t.height());var h=t.offset();n.css("left",t.outerWidth(true)-n.width()+"px").css("top",0);var p=Math.max(Math.round(t.height()*c),u.height()+a.height());o.height(p);var d=function(){o.css("top",Math.min(Math.round(t.scrollTop()*c),t.height()-p)+"px")};d();t.scroll(function(e){d()});var v=function(){$("html").unbind("mousemove.scrollbarpaper")};o.mousedown(function(e){v();var n=e.pageY-o.offset().top;$("html").bind("mousemove.scrollbarpaper",function(e){t.scrollTop((e.pageY-t.offset().top-n)/c);return false}).mouseup(v);return false})}else{n.addClass("hidden-scroll");i.removeClass("scrollbarpaper-visible");i.width(t.width()-i.innerWidth()+i.width()-r);n.height(t.height());var h=t.offset();n.css("left",t.outerWidth(true)-n.width()+"px").css("top",0)}var m=function(){window.setTimeout(function(){var e=t.offset();var n=t.data("offset");if(t.height()!=t.data("height")||f.position().top-i.position().top!=t.data("contentHeight")||e.top!=n.top||e.left!=n.left){t.scrollbarPaper();$(window).resize()}else{m()}},100)};m()})}});